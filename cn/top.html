
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>京都大學藏中國民俗人偶</title>
    <style>
      /* html,
      body, */
      .card-image{
        object-fit:cover;
        width:300px;
        height:300px;
      }
    </style>
    <link rel="shortcut icon" href="/img/favicon.ico">
    <!-- get calcite-web css from the cdn (use latest version) -->
    <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/css/calcite-web.min.css">
  </head>
  <body>
    <div class="wrapper">
      <header class="top-nav">
        <div class="grid-container">
          <div class="column-24">
            <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
              <a class="top-nav-link is-active" href="top.html">Top</a>
              <a class="top-nav-link" href="about.html">About</a>
            </nav>

            <div class="dropdown js-dropdown right top-nav-link">

              <button class="btn btn-transparent dropdown-btn js-dropdown-toggle" tabindex="0" aria-haspopup="true" aria-expanded="false">
                  繁體中文
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 32 32" class="svg-icon"><path d="M28 9v5L16 26 4 14V9l12 12L28 9z"/></svg>
              </button>
              <nav class="dropdown-menu dropdown-right" role="menu">
                <a href="../en/top.html" class="dropdown-link" role="menuitem">English</a>
                <a href="../ja/top.html" class="dropdown-link" role="menuitem">日本語</a>
              </nav>

            </div>
          </div>
        </div>
      </header>

      <div class="panel panel-white trailer-1">
        <div class="grid-container">
          <div class="column-24 leader-1 trailer-1">
            <h1 class="text-center">京都大學藏中國民俗人偶</h1>
          </div>
        </div>
      </div>

      <!-- main-content -->
      <div class="grid-container">

        <div class="column-16 center-column leader-2 trailer-1">
          <h3 class="text-center">收藏簡介</h3>
          <div class="font-size--6 trailer-1">
            京都大學綜合博物館・地理資料部門收藏有38件貼著“中國農村生活模型”標簽的藏品。其中的33件木偶由京都帝國大學文科大學地理學講座於1913年購得，這些木雕模型生動地展現了清末時期民間的生活習俗及農活場景。大部分模型的大小都為實際尺寸的20分之1，但也有尺寸略微偏大的作品。同時，它們所使用的木材亦不盡相同。表現農活或買賣等生活場景的作品中，有的是人與器具的組合，有的則只有器具。從十分精巧到相對樸素，木雕的手藝和技巧也各式各樣。此外，還有3件穿著用布和串珠製成的服飾的戲劇人偶，以及2件陶製的住宅模型。2020年春，本數字檔案公開提供了上述38件作品的所有資料。
          </div>
          <div class="text-center">
          <button class="btn modifier-class" onclick="location.href='about.html'">閱讀更多</button>
          </div>
        </div>

        <div class="column-24 trailer-1">

          <h3 class="text-center leader-1">小販與勞工</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup1">
          </div>

          <h3 class="text-center leader-1">日常生活</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup2">
          </div>

          <h3 class="text-center leader-1">文士與顯貴</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup3">
          </div>

          <h3 class="text-center leader-1">戲劇人偶</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup4">
          </div>
          
          <h3 class="text-center leader-1">門窗隔扇、器具</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup5">
          </div>

          <h3 class="text-center leader-1">工匠與商人</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup6">
          </div>

          <h3 class="text-center leader-1">農民與漁民</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup7">
          </div>

          <h3 class="text-center leader-1">其他（木雕）</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup8">
          </div>

          <h3 class="text-center leader-1">其他（陶器）</h3>
          <div class="block-group block-group-4-up tablet-block-group-2-up" id="blockgroup9">
          </div>

        </div>

      </div>
    </div>

    <footer class="footer padding-leader-1 padding-trailer-1 text-center">
      (c) <a class="link-darker-gray" href="https://www.bun.kyoto-u.ac.jp/en/geography/geo-top_page/">京都大學大學院文學研究科・地理學專業</a> All rights reserved.
    </footer>

    <!-- get calcite-web js from the cdn (use latest version) -->
    <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.2.5/js/calcite-web.min.js"></script>

    <!-- interactive patterns need to be initialized -->
    <script>
       calcite.init()
    </script>
    <script src="https://js.arcgis.com/4.14/"></script>
    <script>
      require([
        "esri/layers/FeatureLayer"
      ], function(
        FeatureLayer
      ) {

        const metadataFL = new FeatureLayer({
          url: "https://services9.arcgis.com/qKCfk1d1Trl16kF0/arcgis/rest/services/chineseDollsMetadata_v3/FeatureServer/0"
        });

        const listGroup = [
          ["小販與勞工"],
          ["日常生活"],
          ["文士與顯貴"],
          ["戲劇人偶"],
          ["門窗隔扇、器具"],
          ["工匠與商人"],
          ["農民與漁民"],
          ["其他（木雕）"],
          ["其他（陶器）"]
        ];

        for (var k = 0, len = listGroup.length; k < len; ++k) {
          
          const blockgroup = document.getElementById("blockgroup" + (k+1));
          listGroup[k].push(blockgroup);
        };
        
        
        queryGroup();
        

        function queryGroup(){

          for (let i = 0, len = listGroup.length; i < len; ++i) {

            const group = listGroup[i][0];
            const blockgroup = listGroup[i][1];

            const queryParams = metadataFL.createQuery();
            queryParams.returnGeometry = false;
            queryParams.where = "group_ = '" + group + "' AND lang = 'cn'" ;
            queryParams.outFields = ["id", "link3d"];
            queryParams.orderByFields = ["id"];

            metadataFL.queryFeatures(queryParams)
            .then(function(response){
              const features = response.features;

              for(let j = 0; j < features.length; j++) {

                const id = features[j].attributes.id;
                const link3d = features[j].attributes.link3d;

                const cardBlock = document.createElement('div');
                cardBlock.classList.add("card");
                cardBlock.classList.add("block");
                cardBlock.classList.add("tablet-leader-1");
                cardBlock.classList.add("leader-1");
                blockgroup.appendChild(cardBlock);

                const figure = document.createElement('figure');
                figure.classList.add("card-image-wrap");
                cardBlock.appendChild(figure);

                const a = document.createElement('a');
                a.href = id + ".html";
                figure.append(a);

                const img = document.createElement('img');
                img.classList.add("card-image");
                if (link3d){
                  img.src = "../img/" + id + "_0_resize.jpg";
                } else {
                  img.src = "../img/" + id + "_1_resize.jpg";
                }
                
                a.append(img);
              };
            })
            .catch(function(error) {
              console.log(error);
            });
          }
        }


      })
  </script>
  </body>
</html>