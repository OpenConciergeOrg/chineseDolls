<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>The Collection of Figures Representing Chinese Culture and Customs at Kyoto University</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  </head>
  <body>
    <div class="container">
      <nav class="navbar navbar-expand-lg" aria-label="Ninth navbar example">
        <div class="container-xl">
          <a class="navbar-brand h1" href="#">The Collection of Figures Representing Chinese Culture and Customs at Kyoto University</a>
          <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample07XL" aria-controls="navbarsExample07XL" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
    
          <div class="navbar-collapse collapse" id="navbarsExample07XL">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link" aria-current="page" href="top.html">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="about.html">About</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" aria-expanded="false">English</a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="../ja/top.html">日本語</a></li>
                  <li><a class="dropdown-item" href="../cn/top.html">繁體中文</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="h4">About the Collection</div>
      <div>
        Thirty-eight items labeled “Figures representing rural lives in China” are stored at the Division of Geographical Materials, Kyoto University Museum. Among these, thirty-three carved wooden figures that were purchased in 1913 by the Department of Geography, College of Letters, Kyoto Imperial University. These are elaborate models representing farming and everyday life scenes during the late Qing dynasty. Most of the figures are about one-twentieth life size, but several are somewhat larger and the types of wood also vary. Many figures are of people with tools to represent activities such as farming and selling goods, and a few are of tools only. The difference in the skill of wood carving varies among figures, from simple and crude carvings to very precise artworks. In addition to these figures, there are three opera dolls made of cloth and beads, and two ceramic models of houses. In spring 2020, this collection was made available as a digital archive.
      </div>

      <a href="about.html" class="btn btn-secondary btn-sm" role="button">Read More</a>

      <p></p>

      <div id="contents">
      </div>

      <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <div class="d-flex align-items-center">
          <span class="mb-3 mb-md-0 text-body-secondary">(c) <a class="link-darker-gray" href="https://www.bun.kyoto-u.ac.jp/geography/geo-top_page/">京都大学大学院文学研究科・地理学専修</a> All rights reserved.</span>
        </div>
      </footer>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script src="https://js.arcgis.com/4.31/"></script>
    <script>

      require([
          "esri/layers/FeatureLayer"
        ], function(
          FeatureLayer
        ) {

          const metadataFL = new FeatureLayer({
            url: "https://services9.arcgis.com/qKCfk1d1Trl16kF0/arcgis/rest/services/chineseDollsMetadata_v3/FeatureServer/0"
          });

          const listGroup = [
            "Peddler and laborer",
            "Everyday lives",
            "Scholars and noblemen",
            "Characters in plays",
            "Joinery and tools",
            "Craftsmen and merchants",
            "Farmers and fishermen",
            "Others (carved wooden figures)",
            "Others (ceramics)"
          ];

          for (var k = 0, len = listGroup.length; k < len; ++k) {
            
            const contents = document.getElementById("contents");
            
            const group = listGroup[k];

            const title = document.createElement("h4");
            title.innerHTML = group;
            contents.appendChild(title);

            const p = document.createElement("p");
            contents.appendChild(p);

            const row = document.createElement("div");
            row.classList.add("row");
            contents.appendChild(row);

            const queryParams = metadataFL.createQuery();
            queryParams.returnGeometry = false;
            queryParams.where = "group_ = '" + group + "' AND lang = 'en'" ;
            queryParams.outFields = ["id", "link3d", "purchase_record"];
            queryParams.orderByFields = ["id"];

            metadataFL.queryFeatures(queryParams)
            .then(function(response){
              const features = response.features;
              console.log(features);

              for(let j = 0; j < features.length; j++) {

                const id = features[j].attributes.id;
                const link3d = features[j].attributes.link3d;
                const purchase_record = features[j].attributes.purchase_record;

                const card = document.createElement('div');
                card.classList.add("card");
                card.classList.add("col-md-2");
                row.appendChild(card);

                const anchor = document.createElement("a");
                anchor.setAttribute("href", id + ".html");
                card.appendChild(anchor);

                const img = document.createElement('img');
                img.classList.add("card-img-top");
                if (link3d){
                  img.src = "../img/" + id + "_0_resize.jpg";
                } else {
                  img.src = "../img/" + id + "_1_resize.jpg";
                }
                img.setAttribute("alt", id);
                anchor.append(img);
              };

              row.appendChild(p);

            });


          };


      });

    </script>
  
  </body>
</html>